<!-- 496748c0-d69d-4388-99b8-858ea781b2fa ea768ac6-3fa7-4cc5-85db-190cb99f66e2 -->
# Password Manager UI/UX Overhaul (Dark + Red Accent)

## Design Principles

- Immersive dark-only UI with deep neutrals, saturated red accents, subtle glass, and soft shadows.
- Focus on speed: command palette, keyboard shortcuts, inline quick actions, and near-zero friction add/edit.
- Information clarity: clean typography, density controls, responsive layout, readable contrasts.
- Delight via micro-interactions and motion (Framer Motion), but keep performance high.

## Tech/Design System

- Tailwind-powered theme tokens; refine `.pw-theme` variables for elevations, borders, text, and accent ramps.
- Layout scaffolding using CSS grid/flex; responsive at 360/768/1024/1440.
- Framer Motion for transitions (drawer, modals, list entrance).
- lucide-react for icons, sonner for toasts, cmdk for command palette.

## IA & Navigation

- Global header: search, quick add, user menu (account/lock/unlock), density toggle, theme branding.
- Left sidebar (collapsible): All Items, Favorites, Tags, Trash; room for future folders/vaults.
- Main content: password list (virtualizable later), with toolbar (filters, sort, bulk actions).
- Right detail drawer (on selection) for quick edit, copy, reveal, and metadata.

## Core Views

- Vault Home (`/pw`): list/grid toggle; search bar sticky; empty and zero-state prompts.
- Trash (`/pw/trash`): soft-deleted items with restore/delete permanently.
- Settings (`/pw/settings`): density, masking default, generator presets, keyboard cheat sheet.
- Onboarding overlay for first-time users (master password, add first item CTA).

## Components (new or replaced)

- Layout
  - `src/components/pw/LayoutShell.tsx` (header+sidebar+content shell; glass header)
  - `src/components/pw/Header.tsx` (global search + actions)
  - `src/components/pw/SidebarNav.tsx` (nav items, active state, collapse)
- List & Items
  - `src/components/pw/PasswordToolbar.tsx` (filters, sort, density, bulk)
  - `src/components/pw/PasswordList.tsx` (masonry-ready grid/list; responsive)
  - `src/components/pw/PasswordRow.tsx` (compact row with quick actions)
  - `src/components/pw/PasswordCard.tsx` (grid card variant, richer visuals)
- Details & Modals
  - `src/components/pw/PasswordDrawer.tsx` (right drawer with edit, copy, reveal)
  - Enhance existing `PasswordModal` (add/edit) with sections + generator presets
- Global UX
  - `src/components/pw/CommandPalette.tsx` (cmdk: add, search, navigate)
  - `src/components/pw/Toasts.tsx` (centralized toast helpers)
  - `src/components/pw/EmptyStates.tsx` (first use/empty filter states)

## Styling & Tokens

- Expand index.css `.pw-theme`:
  - `--pw-bg-0..3` surfaces; `--pw-border`, `--pw-muted`, `--pw-text`, `--pw-accent-1..3`.
  - Button/field component classes via Tailwind @apply (pw button variants: primary, subtle, ghost-danger).
- Tailwind config: add red accent scale aliases and shadow presets for cards/drawers.

## Keyboard & Shortcuts

- Global: Cmd/Ctrl+K (palette), Cmd/Ctrl+F (search), Cmd/Ctrl+N (add), Cmd/Ctrl+Shift+V (toggle reveal), Del (soft delete), Cmd/Ctrl+Enter (save forms).

## Accessibility

- Proper roles/aria for dialogs/drawers, focus traps, ESC to close, reduced motion setting respect, 4.5:1 contrast.

## Animations

- Header enter, sidebar collapse/expand; list item hover/press; drawer slide-in with spring; toasts slide/fade.

## Routing Updates

- Under `/pw`:
  - `index` → `VaultHome` (shell + list)
  - `/trash` → Trash view
  - `/settings` → Settings

## Implementation Targets

- Files to add/replace (high-level):
  - Add: `src/components/pw/LayoutShell.tsx`, `Header.tsx`, `SidebarNav.tsx`, `PasswordToolbar.tsx`, `PasswordList.tsx`, `PasswordRow.tsx`, `PasswordCard.tsx`, `PasswordDrawer.tsx`, `CommandPalette.tsx`, `Toasts.tsx`, `EmptyStates.tsx`, settings/views for trash.
  - Update: `src/components/layout/PasswordLayout.tsx` to mount `LayoutShell`; `src/pages/PasswordHomePage.tsx` → `VaultHomePage.tsx` using new components; `src/components/passwords/PasswordModal.tsx` styling; `src/index.css` token expansion; `src/App.tsx` add `/pw/trash`, `/pw/settings` routes.

## Minimal Snippet (theme token pattern)

```css
/* index.css */
.pw-theme {
  --pw-bg-0: #0a0a0b;
  --pw-bg-1: #101014;
  --pw-bg-2: #15161a;
  --pw-card: rgba(255, 0, 0, 0.06);
  --pw-border: rgba(255, 255, 255, 0.08);
  --pw-text: #f9fafb;
  --pw-muted: #a1a1aa;
  --pw-accent-1: #ef4444;
  --pw-accent-2: #dc2626;
  --pw-accent-3: #b91c1c;
}
```

## Acceptance Criteria

- PW mode loads a distinct, polished shell with header + sidebar and bold red accent theme.
- List supports list/grid, search, filter, sort, bulk actions, keyboard shortcuts.
- Detail drawer allows quick edit/reveal/copy with smooth motion.
- Trash/Settings routes functional and visually consistent.
- A11y and contrast pass; responsive layouts solid at key breakpoints.
- No regressions to API manager mode.

### To-dos

- [ ] Add appType to user model/store and persist on sign-up
- [ ] Add registration UI step to choose API vs PW
- [ ] Add PW routes and PasswordAppGuard in App.tsx
- [ ] Implement dark-only red-accent PW theme and PasswordLayout
- [ ] Create Firestore passwords model and passwordStore
- [ ] Build PasswordsView, PasswordCard, PasswordModal
- [ ] Integrate encryptionService and master password modal
- [ ] Enforce add-password 3/day using rateLimitStore and counters
- [ ] Add Firestore rules for users/{uid}/passwords
- [ ] Add password manager docs and link from getting-started
- [ ] Take over the world